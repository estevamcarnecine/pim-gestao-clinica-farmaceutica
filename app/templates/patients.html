{% extends "base.html" %}

{% block content %}
<h2>Patients List</h2>

<a href="{{ url_for('main.new_patient') }}">Add New Patient</a>
<br><br>

<table border="1" cellpadding="8">
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Birth Date</th>
        <th>Created At</th>
        <th>Actions</th>
    </tr>

    {% for patient in patients %}
    <tr>
        <td>{{ patient.id }}</td>
        <td>{{ patient.name }}</td>
        <td>{{ patient.birth_date if patient.birth_date else 'N/A' }}</td>
        <td>{{ patient.created_at }}</td>
        <td>
            <a href="{{ url_for('main.edit_patient', patient_id=patient.id) }}">Edit</a>
            <form method="POST" action="{{ url_for('main.delete_patient', patient_id=patient.id) }}" style="display:inline;">
                <button type="submit" onclick="return confirm('Are you sure you want to delete this patient?');">Delete</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
